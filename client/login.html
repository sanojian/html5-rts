<!DOCTYPE html>
<html>
    <head>
		<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
		<title>MountainKing - Login</title>
		
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
		<link href='http://fonts.googleapis.com/css?family=Press+Start+2P' rel='stylesheet' type='text/css'>		
	
		<style>
			body {
				font-family: 'Press Start 2P', cursive;
				font-size: 1.2em;
				background: #726B7E;
			}
			
			input, button {
				font-family: 'Press Start 2P', cursive;
				font-size: 1em;
			}
		
			table.tblLoginBox {
				border: 2px solid;
				border-radius: 6px;
				background: #E5E6C7;
				width: 600px;
				height: 400px;
			}
			
			.afterName {
				display: none;
			}
			.afterPlanet {
				display: none;
			}
			.afterPass {
				display: none;
			}
		</style>
		
		<script>

window.addEventListener("load", function(event) {
	$('#txtName').focus();
	
	if (localStorage.playerName) {
		$('#txtName').val(localStorage.playerName);
	}
	
	$('#txtName').bind('keyup', function(e) {
		var code = (e.keyCode ? e.keyCode : e.which);
		//if( code == 13) { //Enter keycode
		//	playGame();
		//}
		if ($('#txtName').val()) {
			$('.afterName').show();
		}
		else {
			$('.afterName').hide();
		}
	});

	$('#txtPlanet').bind('keyup', function(e) {
		var txt = $('#txtPlanet').val().toUpperCase();
		if (txt == 'EARTH' || txt == 'EARF') {
			$('.afterPlanet').show();
		}
		else {
			$('.afterPlanet').hide();
		}
	});

	$('#txtPass').bind('keyup', function(e) {
		var code = (e.keyCode ? e.keyCode : e.which);
		if( $('#txtPass').val() && code == 13) { //Enter keycode
			playGame();
		}
		if ($('#txtPass').val()) {
			$('.afterPass').show();
		}
		else {
			$('.afterPass').hide();
		}
	});
});

function playGame() {
	var name = $('#txtName').val()
	if (!name) {
		name = 'guest' + (Math.random() * 10000).toFixed(0);
	}
	localStorage.playerName = name;
	localStorage.playerPass = $('#txtPass').val();
	
	location.href = './client.html';
}
		</script>
		
	</head>
	
	<body>
		<table height="400" width="100%">
			<tr>
				<td align="center" valign="middle">
					<table class="tblLoginBox">
						<tr>
							<td align="center">Halt!  Who are you?</td>
						</tr>
						<tr>
							<td align="center"><img src="./images/dwarf.png" /></td>
						</tr>
						<tr>
							<td align="center"><input type="text" id="txtName" placeholder="name"  maxlength="10"/></td>
						</tr>
						<tr class="afterName">
							<td align="center">What planet are you from?</td>
						</tr>
						<tr class="afterName">
							<td align="center"><input type="text" id="txtPlanet" placeholder="planet (earth)" /></td>
						</tr>
						<tr class="afterPlanet">
							<td align="center">I also would have accepted 'Earf'<br><br>Password (insecure)?</td>
						</tr>
						<tr class="afterPlanet">
							<td align="center"><input type="text" id="txtPass" placeholder="simple password" /></td>
						</tr>
						<tr class="afterPass">
							<td align="center"><button onclick="playGame()">Play!</button></td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
	
	</body>
</html>